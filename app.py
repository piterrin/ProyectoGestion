# -*- coding: utf-8 -*-
"""app

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1P2Sf7Cw6Lb9ArCfMnk4oxm2Lf9bXpxhU
"""

import streamlit as st
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

st.set_page_config(page_title="Ecosistema Gamer LATAM", layout="wide")

# --- T칤tulo y descripci칩n ---
st.title("游늵 Ecosistema de Videojuegos en Latinoam칠rica")
st.markdown("""
Esta plataforma presenta un an치lisis exploratorio sobre juegos desarrollados en Latinoam칠rica.
Se muestran estad칤sticas, limpieza de datos y visualizaciones de ventas por pa칤s, a침o y juego.
""")

# --- Cargar datos ---
@st.cache_data
def cargar_datos():
    return pd.read_csv("ecosistema_videojuegos_latam.csv")

df = cargar_datos()

# --- Secci칩n 1: Vista previa y limpieza ---
st.header("游빛 Limpieza de Datos")

col1, col2 = st.columns(2)
with col1:
    st.write("**Duplicados:**", df.duplicated().sum())
    st.write("**Nulos por columna:**")
    st.write(df.isnull().sum())

with col2:
    df_clean = df.drop_duplicates().dropna()
    st.success(f"Registros limpios: {len(df_clean)}")

# --- Secci칩n 2: Estad칤sticas b치sicas ---
st.header("游늳 Estad칤sticas Generales")
col3, col4, col5 = st.columns(3)

with col3:
    st.metric("游꿡 Juegos 칰nicos", df_clean["juego"].nunique())
with col4:
    st.metric("游닍 Total ventas", f"{df_clean['ventas'].sum():,}")
with col5:
    st.metric("游눯 Promedio ventas", f"{df_clean['ventas'].mean():,.0f}")

# --- Secci칩n 3: Gr치ficos ---
st.header("游늵 Visualizaciones")

# Ventas por pa칤s
st.subheader("Ventas totales por pa칤s")
fig1, ax1 = plt.subplots(figsize=(10, 5))
sns.barplot(data=df_clean, x="pais", y="ventas", estimator=sum, ci=None, ax=ax1)
plt.xticks(rotation=45)
st.pyplot(fig1)

# Ventas por a침o
st.subheader("Distribuci칩n de ventas por a침o")
fig2, ax2 = plt.subplots(figsize=(10, 5))
sns.boxplot(data=df_clean, x="anio", y="ventas", ax=ax2)
st.pyplot(fig2)

# Top juegos m치s vendidos
st.subheader("Top 10 Juegos m치s vendidos")
top_juegos = df_clean.groupby("juego")["ventas"].sum().sort_values(ascending=False).head(10)
fig3, ax3 = plt.subplots(figsize=(10, 6))
sns.barplot(x=top_juegos.values, y=top_juegos.index, ax=ax3)
st.pyplot(fig3)

# --- Secci칩n 4: Riesgos y seguridad ---
st.header("游 Riesgos y Seguridad de Datos")

st.markdown("""
- Evita publicar archivos con datos sensibles de usuarios o empresas sin su autorizaci칩n.
- Verifica la fuente y calidad de los datos cargados.
- Aplica medidas de cifrado si trabajas con datos privados en producci칩n.
- Asegura autenticaci칩n si despliegas esta app en l칤nea.
""")